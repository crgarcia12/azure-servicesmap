<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Collapsible Tree Example</title>

    <style>
        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 3px;
        }

        .node text {
            font: 12px sans-serif;
        }

        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 2px;
        }
    </style>
    <!-- Azure icon styles -->
    <style class="MsPortalImpl/Base/Base.Images.css">.msportalfx-svg-c01{fill:#fff}.msportalfx-svg-c02{fill:#e5e5e5}.msportalfx-svg-c03{fill:#a0a1a2}.msportalfx-svg-c04{fill:#7a7a7a}.msportalfx-svg-c05{fill:#3e3e3e}.msportalfx-svg-c06{fill:#1e1e1e}.msportalfx-svg-c07{fill:#0f0f0f}.msportalfx-svg-c08{fill:#ba141a}.msportalfx-svg-c09{fill:#dd5900}.msportalfx-svg-c10{fill:#ff8c00}.msportalfx-svg-c11{fill:#fcd116}.msportalfx-svg-c12{fill:#fee087}.msportalfx-svg-c13{fill:#b8d432}.msportalfx-svg-c14,.msportalfx-svg-c32{fill:#57a300}.msportalfx-svg-c15{fill:#59b4d9}.msportalfx-svg-c16{fill:#3999c6}.msportalfx-svg-c17{fill:#804998}.msportalfx-svg-c18{fill:#ec008c}.msportalfx-svg-c19{fill:#0072c6}.msportalfx-svg-c20{fill:#68217a}.msportalfx-svg-c21{fill:#00188f}.msportalfx-svg-c22{fill:#e81123}.msportalfx-svg-c23{fill:#cae3f3}.msportalfx-svg-c24{fill:#59aed3}.msportalfx-svg-c25{fill:#4c3b12}.msportalfx-svg-c26{fill:#be9555}.msportalfx-svg-c27{fill:#4f4d52}.msportalfx-svg-c28{fill:#ef6f59}.msportalfx-svg-c29{fill:#f7cb64}.msportalfx-svg-c30{fill:#fdd8db}.msportalfx-svg-c31{fill:#f6ffec}.msportalfx-svg-c33{fill:#8a2da5}.msportalfx-svg-c34{fill:#e00b1c}.msportalfx-svg-c35{fill:#015cda}.msportalfx-svg-c36{fill:#5db300}.msportalfx-svg-c97{fill:#ffb900}.msportalfx-svg-c98{fill:#00a4ef}.msportalfx-svg-c99{fill:#f25022}.fxs-theme-dark .msportalfx-svg-c05,.msportalfx-inverted-theme .msportalfx-svg-c05{fill:#777}.fxs-theme-dark .msportalfx-svg-c07,.msportalfx-inverted-theme .msportalfx-svg-c07{fill:#f2f2f2}.msportalfx-svg-palette-white>*,.msportalfx-svg-palette-white>g>*{fill:#fff}.msportalfx-svg-palette-blue>*,.msportalfx-svg-palette-blue>g>*{fill:#3999c6}.msportalfx-svg-palette-black>*,.msportalfx-svg-palette-black>g>*{fill:#1e1e1e}.msportalfx-svg-palette-green>*,.msportalfx-svg-palette-green>g>*{fill:#57a300}.msportalfx-svg-palette-gray>*,.msportalfx-svg-palette-gray>g>*{fill:#a0a1a2}.msportalfx-svg-palette-inherit>*,.msportalfx-svg-palette-inherit>g *{fill:inherit!important}.msportalfx-svg-badge{position:absolute;left:0;bottom:0;min-height:10px;min-width:10px}.ext-fxc-menu-icon>.msportalfx-svg-badge{left:-2px;bottom:-2px;min-height:8px;min-width:8px}.msportalfx-svg-disabled{filter:grayscale(100%)}@-moz-document url-prefix(){.msportalfx-svg-disabled{filter:none}}.msportalfx-svg-disabled .msportalfx-svg-c01{fill:#fff}.msportalfx-svg-disabled .msportalfx-svg-c02{fill:#e5e5e5}.msportalfx-svg-disabled .msportalfx-svg-c03{fill:#a1a1a1}.msportalfx-svg-disabled .msportalfx-svg-c04{fill:#7a7a7a}.msportalfx-svg-disabled .msportalfx-svg-c05{fill:#3e3e3e}.msportalfx-svg-disabled .msportalfx-svg-c06{fill:#1e1e1e}.msportalfx-svg-disabled .msportalfx-svg-c07{fill:#0f0f0f}.msportalfx-svg-disabled .msportalfx-svg-c08{fill:#676767}.msportalfx-svg-disabled .msportalfx-svg-c09{fill:#6f6f6f}.msportalfx-svg-disabled .msportalfx-svg-c10{fill:grey}.msportalfx-svg-disabled .msportalfx-svg-c11{fill:#898989}.msportalfx-svg-disabled .msportalfx-svg-c12{fill:#c3c3c3}.msportalfx-svg-disabled .msportalfx-svg-c13{fill:#838383}.msportalfx-svg-disabled .msportalfx-svg-c14{fill:#5d5d5d}.msportalfx-svg-disabled .msportalfx-svg-c15{fill:#999}.msportalfx-svg-disabled .msportalfx-svg-c16{fill:grey}.msportalfx-svg-disabled .msportalfx-svg-c17{fill:#717171}.msportalfx-svg-disabled .msportalfx-svg-c18{fill:#767676}.msportalfx-svg-disabled .msportalfx-svg-c19{fill:#636363}.msportalfx-svg-disabled .msportalfx-svg-c20{fill:#4e4e4e}.msportalfx-svg-disabled .msportalfx-svg-c21{fill:#484848}.msportalfx-svg-disabled .msportalfx-svg-c22{fill:#7d7d7d}.msportalfx-svg-disabled .msportalfx-svg-c23{fill:#dfdfdf}.msportalfx-svg-disabled .msportalfx-svg-c24{fill:#969696}.msportalfx-svg-disabled .msportalfx-svg-c25{fill:#2f2f2f}.msportalfx-svg-disabled .msportalfx-svg-c26{fill:#8a8a8a}.msportalfx-svg-disabled .msportalfx-svg-c27{fill:#505050}.msportalfx-svg-disabled .msportalfx-svg-c28{fill:#a4a4a4}.msportalfx-svg-disabled .msportalfx-svg-c29{fill:#aeaeae}.msportalfx-svg-disabled .msportalfx-svg-c30{fill:#ebebeb}.msportalfx-svg-disabled .msportalfx-svg-c31{fill:#f6f6f6}.msportalfx-svg-disabled .msportalfx-svg-c97{fill:grey}.msportalfx-svg-disabled .msportalfx-svg-c98{fill:#787878}.msportalfx-svg-disabled .msportalfx-svg-c99{fill:#8a8a8a}.msportalfx-svg-loading-square{-webkit-animation:ProgressFlagAnimation 1.45s infinite ease-in-out;animation:ProgressFlagAnimation 1.45s infinite ease-in-out}.msportalfx-svg-loading-square:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s}.msportalfx-svg-loading-square:nth-child(2){-webkit-animation-delay:.2s;animation-delay:.2s}.msportalfx-svg-loading-square:nth-child(3){-webkit-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes ProgressFlagAnimation{0%{transform:scale(1);opacity:.3}36.1%{transform:scale(1.06);opacity:1}50%{transform:scale(1.06);opacity:1}86.1%{transform:scale(1);opacity:.3}}@keyframes ProgressFlagAnimation{0%{transform:scale(1);opacity:.3}36.1%{transform:scale(1.06);opacity:1}50%{transform:scale(1.06);opacity:1}86.1%{transform:scale(1);opacity:.3}}.msportalfx-svg-flip-horizontal>svg,svg.msportalfx-svg-flip-horizontal{transform:scalex(-1)}.msportalfx-svg-flip-vertical>svg,svg.msportalfx-svg-flip-vertical{transform:scaley(-1)}.msportalfx-svg-rotate360{-webkit-animation:ImageRotation 1.45s infinite linear;animation:ImageRotation 1.45s infinite linear}@-webkit-keyframes ImageRotation{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes ImageRotation{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fxs-svg-number .msportalfx-font-bold{font-size:10px;fill:#0065ad}</style>
</head>

<body>

    <!-- load the d3.js library -->
    <script src="http://d3js.org/d3.v3.min.js"></script>

    <script>

        var treeData = [
            {
                "name": "Top Level",
                "parent": "null",
                "children": [
                    {
                        "name": "Level 2: A",
                        "parent": "Top Level",
                        "icon": "<title><\/title><circle cx=\"25\" cy=\"25\" r=\"21.756\" class=\"msportalfx-svg-c01\"><\/circle><path d=\"M44.948 33.683C40.152 44.7 27.333 49.744 16.316 44.948L33.683 5.052c11.018 4.795 16.061 17.614 11.265 28.631z\" class=\"msportalfx-svg-c02\"><\/path><path d=\"M25 4.07c11.541 0 20.93 9.389 20.93 20.93S36.541 45.93 25 45.93 4.07 36.541 4.07 25 13.459 4.07 25 4.07m0-2C12.336 2.07 2.07 12.336 2.07 25S12.336 47.93 25 47.93 47.93 37.664 47.93 25 37.664 2.07 25 2.07z\" class=\"msportalfx-svg-c03\"><\/path><path d=\"M10.131 16.951l.543-.94 2.915 1.683-.543.94zm14.412-8.912h1.085v3.366h-1.085zm6.817 5.005l1.683-2.915.941.543-1.683 2.915zm7.039 11.4h3.366v1.086h-3.366zm-2.103 7.615l.543-.94 2.914 1.682-.543.94z\" class=\"msportalfx-svg-c04\"><\/path><path d=\"M36.296 32.059l.543-.94 2.914 1.682-.543.94zm-11.753 6.189h1.085v3.366h-1.085zM10.131 16.951l.543-.94 2.915 1.683-.543.94zm6.131 22.246l1.683-2.915.94.543-1.682 2.915z\" class=\"msportalfx-svg-c04\"><\/path><path d=\"M16.262 39.197l1.683-2.915.94.543-1.682 2.915zM8.197 24.444h3.367v1.086H8.197z\" class=\"msportalfx-svg-c04\"><\/path><path opacity=\".5\" d=\"M10.131 16.951l.543-.94 2.915 1.683-.543.94zm14.412-8.912h1.085v3.366h-1.085zm6.817 5.005l1.683-2.915.941.543-1.683 2.915zm7.039 11.4h3.366v1.086h-3.366zm-2.103 7.615l.543-.94 2.914 1.682-.543.94z\" class=\"msportalfx-svg-c06\"><\/path><path opacity=\".5\" d=\"M36.296 32.059l.543-.94 2.914 1.682-.543.94zm-11.753 6.189h1.085v3.366h-1.085zM10.131 16.951l.543-.94 2.915 1.683-.543.94zm6.131 22.246l1.683-2.915.94.543-1.682 2.915z\" class=\"msportalfx-svg-c06\"><\/path><path opacity=\".5\" d=\"M16.262 39.197l1.683-2.915.94.543-1.682 2.915z\" class=\"msportalfx-svg-c06\"><\/path><path d=\"M16.108 10.614l.94-.543 1.683 2.915-.94.543zm20.338 7.231l2.915-1.683.543.94-2.915 1.683zm-5.232 18.934l.94-.543 1.683 2.914-.94.543z\" class=\"msportalfx-svg-c04\"><\/path><path d=\"M31.214 36.779l.94-.543 1.683 2.914-.94.543zM16.108 10.614l.94-.543 1.683 2.915-.94.543zm-5.813 22.332l2.914-1.683.543.94-2.914 1.683z\" class=\"msportalfx-svg-c04\"><\/path><path d=\"M10.295 32.946l2.914-1.683.543.94-2.914 1.683z\" class=\"msportalfx-svg-c04\"><\/path><path opacity=\".5\" d=\"M16.108 10.614l.94-.543 1.683 2.915-.94.543zm20.338 7.231l2.915-1.683.543.94-2.915 1.683zm-5.232 18.934l.94-.543 1.683 2.914-.94.543z\" class=\"msportalfx-svg-c06\"><\/path><path opacity=\".5\" d=\"M31.214 36.779l.94-.543 1.683 2.914-.94.543zM16.108 10.614l.94-.543 1.683 2.915-.94.543zm-5.813 22.332l2.914-1.683.543.94-2.914 1.683z\" class=\"msportalfx-svg-c06\"><\/path><path opacity=\".5\" d=\"M10.295 32.946l2.914-1.683.543.94-2.914 1.683zm-2.098-8.502h3.367v1.086H8.197z\" class=\"msportalfx-svg-c06\"><\/path><path d=\"M35.767 30.083l-9.309-2.529a1.893 1.893 0 0 1 .993-3.653l9.309 2.529a1.893 1.893 0 0 1-.993 3.653z\" class=\"msportalfx-svg-c04\"><\/path><path d=\"M25.096 27.623c-.94 0-1.703-.848-1.703-1.893V9.618c0-1.045.763-1.893 1.703-1.893s1.703.848 1.703 1.893V25.73c0 1.046-.762 1.893-1.703 1.893z\" class=\"msportalfx-svg-c04\"><\/path><circle cx=\"25\" cy=\"25\" r=\"3.235\" class=\"msportalfx-svg-c06\"><\/circle><path opacity=\".5\" d=\"M25 47.93c12.664 0 22.93-10.266 22.93-22.93S37.664 2.07 25 2.07c-.176 0-.349.009-.523.013l-.084 4.022.999.021c8.613.182 16.015 6.149 17.999 14.512 2.404 10.14-3.889 20.346-14.028 22.751a18.93 18.93 0 0 1-4.362.513h-.002A18.837 18.837 0 0 1 6.61 29.361c-1.448-6.105.276-12.467 4.411-17.034l4.037 4.109L17.473 3.34C8.508 6.456 2.07 14.974 2.07 25c0 12.664 10.266 22.93 22.93 22.93z\" class=\"msportalfx-svg-c01\"><\/path><path d=\"M14.423 14.363L4.611 4.377l12.033-2.052z\" class=\"msportalfx-svg-c17\"><\/path><path d=\"M25.497 1.1l-.084 4.027c8.844.187 16.815 6.283 18.949 15.281 2.532 10.677-4.094 21.423-14.77 23.955S8.169 40.269 5.637 29.592c-1.868-7.877 1.258-15.78 7.308-20.406l-2.863-2.862C3.09 11.917-.458 21.225 1.745 30.516c3.046 12.843 15.927 20.785 28.77 17.739S51.3 32.328 48.254 19.485C45.687 8.657 36.129 1.314 25.497 1.1z\" class=\"msportalfx-svg-c17\"><\/path>",
                        "children": [
                            {
                                "name": "Son of A",
                                "parent": "Level 2: A"
                            },
                            {
                                "name": "Daughter of A",
                                "parent": "Level 2: A"
                            }
                        ]
                    },
                    {
                        "name": "Level 2: B",
                        "parent": "Top Level"
                    }
                ]
            }
        ];



        // ************** Generate the tree diagram  *****************
        var margin = { top: 20, right: 120, bottom: 20, left: 120 },
            width = 960 - margin.right - margin.left,
            height = 500 - margin.top - margin.bottom;

        var i = 0;

        var tree = d3.layout.tree()
            .size([height, width]);

        var diagonal = d3.svg.diagonal()
            .projection(function (d) { return [d.y, d.x]; });

        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.right + margin.left)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            root = treeData[0];
        update(root);

        // d3.json("https://swissresrmsstorage.z6.web.core.windows.net/data.json", function (error, treeData) {
        //     root = treeData[0];
        //     update(root);
        // });
        
        function update(source) {

            // Compute the new tree layout.
            var nodes = tree.nodes(root).reverse(),
                links = tree.links(nodes);

            // Normalize for fixed-depth.
            nodes.forEach(function (d) { d.y = d.depth * 180; });

            // Declare the nodes
            var node = svg.selectAll("g.node")
                .data(nodes, function (d) { return d.id || (d.id = ++i); });

            // Enter the nodes.
            var nodeEnter = node.enter().append("g")
                .attr("class", "node")
                .attr("transform", function (d) {
                    return "translate(" + d.y + "," + d.x + ")";
                });

            nodeEnter.each(function (d) {
                const sel = d3.select(this);

                if(d.icon != null) {
                    sel.node().innerHTML = d.icon;
                } else {
                    sel.append("circle")
                        .attr("r", 10);
                }
            });

            nodeEnter.append("text")
                .attr("x", function (d) {
                    return d.children || d._children ? -13 : 13;
                })
                .attr("dy", ".35em")
                .attr("text-anchor", function (d) {
                    return d.children || d._children ? "end" : "start";
                })
                .text(function (d) { return d.name; })
                .style("fill-opacity", 1);

            // Declare the links
            var link = svg.selectAll("path.link")
                .data(links, function (d) { return d.target.id; });

            // Enter the links.
            link.enter().insert("path", "g")
                .attr("class", "link")
                .attr("d", diagonal);

        }

    </script>

</body>

</html>